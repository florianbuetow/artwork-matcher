# Search Service Performance Test Report

## Key Findings

- **Index size impact**: 50,000 vectors take 4.5x longer than 100 vectors (2.92 ms vs 0.65 ms)
- **K value impact**: k=100 takes 1.1x longer than k=1 (1.10 ms vs 1.03 ms)
- **Sequential throughput**: 1062.8 req/s
- **Best concurrent throughput**: 1326.8 req/s (concurrent_16)


## Test Configuration

| Parameter | Value |
|-----------|-------|
| Iterations per test | 30 |
| Index type | IndexFlatIP (exhaustive search) |
| Embedding dimension | 768 |
| Distance metric | Inner product (cosine on normalized vectors) |

## Index Size Tests

Measures how search latency scales with the number of vectors in the index. Flat index performs exhaustive search, so O(n) complexity is expected.

| Index Size | Mean | Std | P50 | P95 | P99 |
|------------|------|-----|-----|-----|-----|
| 100 | 0.65 ms | 0.80 ms | 0.51 ms | 0.59 ms | 3.69 ms |
| 500 | 0.49 ms | 0.02 ms | 0.48 ms | 0.52 ms | 0.53 ms |
| 1,000 | 0.51 ms | 0.06 ms | 0.50 ms | 0.56 ms | 0.73 ms |
| 5,000 | 0.70 ms | 0.13 ms | 0.66 ms | 0.91 ms | 1.23 ms |
| 10,000 | 0.92 ms | 0.28 ms | 0.87 ms | 0.93 ms | 1.98 ms |
| 50,000 | 2.92 ms | 1.57 ms | 2.62 ms | 2.75 ms | 8.86 ms |

**Analysis:**

- Scaling from 100 to 50,000 vectors adds ~2.26 ms (~0.045 ms per 1,000 vectors)
- Scaling is **sub-linear** (4.5x for 500x more vectors) - FAISS optimizations are effective
- Latency is **highly consistent** (very low standard deviation)


## K Value Tests

Measures whether the number of requested results affects search latency. For flat index, k should have minimal impact since all distances are computed.

| K Value | Mean | Std | P50 | P95 | P99 |
|---------|------|-----|-----|-----|-----|
| k=1 | 1.03 ms | 0.10 ms | 1.01 ms | 1.13 ms | 1.35 ms |
| k=5 | 0.90 ms | 0.03 ms | 0.90 ms | 0.93 ms | 0.97 ms |
| k=10 | 0.92 ms | 0.09 ms | 0.90 ms | 1.01 ms | 1.28 ms |
| k=25 | 0.96 ms | 0.08 ms | 0.94 ms | 1.05 ms | 1.26 ms |
| k=50 | 0.99 ms | 0.04 ms | 0.99 ms | 1.05 ms | 1.07 ms |
| k=100 | 1.10 ms | 0.31 ms | 1.04 ms | 1.10 ms | 2.30 ms |

**Analysis:**

- K value has **minimal impact** on latency (only 0.08 ms difference between k=1 and k=100)
- Latency is **highly consistent** across all k values


## Throughput Tests

Measures sustained request handling capacity.

| Test | Requests | Duration | Throughput | Mean | P99 |
|------|----------|----------|------------|------|-----|
| sequential | 250 | 0.24 s | **1062.8 req/s** | 0.94 ms | 1.17 ms |
| concurrent_2 | 250 | 0.22 s | **1124.1 req/s** | 1.77 ms | 2.33 ms |
| concurrent_4 | 248 | 0.20 s | **1250.5 req/s** | 3.17 ms | 4.52 ms |
| concurrent_8 | 248 | 0.19 s | **1325.0 req/s** | 5.89 ms | 7.63 ms |
| concurrent_16 | 240 | 0.18 s | **1326.8 req/s** | 11.46 ms | 14.36 ms |

**Analysis:**

- Sequential baseline: 1062.8 req/s
- concurrent_2: no significant speedup (likely CPU-bound)
- concurrent_4: 1.18x speedup over sequential
- concurrent_8: 1.25x speedup over sequential
- concurrent_16: 1.25x speedup over sequential
- **Recommendation**: Use concurrent requests for 1.2x throughput gain


---

*Report generated by search service performance tests.*